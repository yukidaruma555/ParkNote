<div class="row">
  <div class="col-md-3">
      <%=render 'users/list',user: @user %>
  </div>

  <div class="col-md-9">
   <header class="d-flex justify-content-between align-items-start mb-3">
    <div>
    <h2 class="mb-1">投稿詳細</h2>
      <div class="small text-muted">
       投稿者： <%= link_to @post.user.name, user_path(@post.user), class: "fw-semibold textt-decoration-none" %>
        ・ <%= @post.created_at.strftime('%Y/%m/%d') %>
       </div>
    </div>

    <% if @post.user == current_user %>
      <div class="btn-group">
      <%= link_to "編集", edit_post_path, class: "btn btn-sm btn-outline-secondary" %> 
      <%= link_to "削除", post_path(@post), method: :delete, data: { confirm: '本当に削除しますか？' },
          class: "btn btn-sm btn-outline-danger" %>
    </div>
   <% end %>
  </header>

    <section class="d-flex gap-4 align-items-start mb-4">
     <div class="flex-shrink-0" style="width: 150px;"> 
       <%= image_tag @post.get_image, class: "img-fluid rounded" %>
     </div>
        <div class="flex-grow-1">
          <h3 class="h5 mb-2"><%= @post.title %></h3>
           <div class="lh-lg text-body"><%= @post.body %></div>
        </div>
      </section>
      <section aria-labelledby="comments-title" class="mb-4">
         <h3 id="comments-title" class="h5 mb-3">
           コメント件数 : <%= @post.post_comments.count %></h3>

           <ul class="list-group mb-4">
             <% @post.post_comments.each do |post_comment| %>
                <li class="list-group-item p-3">
                 <div class="d-flex gap-3">
                   <%= image_tag post_comment.user.get_profile_image(100,100), class: "img-fluid rounded-circle mb-3", style: "object-fit:cover;" %>
                   <div class="flex-grow-1">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                     <div class="fw-semibold">
                        <%= post_comment.user.name %>
                     </div>
                       <small class="text-muted">
                          <%= post_comment.created_at.strftime('%Y/%m/%d') %>
                       </small>
                    </div>
                       <p class="mb-0"><%= post_comment.comment %></p>
                  </div>
               </div>
              </li>
            <% end %>
          </ul>
  

  <div class="border rounded p-3">
    <h4 class="h6 mb-2">コメントを投稿</h4>
      <%= form_with model: [@post,@post_comment] do |f| %>
        <%= f.text_area :comment, rows: 4, class: "form-control", placeholder: "コメントをここに" %>
          <div class="text-end">
            <%= f.submit "送信する", class: "btn btn-primary" %>
          </div>
      <% end %>
  </div>
</div>
</div>